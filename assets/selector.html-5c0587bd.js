import{_ as s,X as n,Y as a,a3 as e}from"./framework-a5f096d1.js";const p={},o=e(`<p>本章主要介绍如下函数：</p><table><thead><tr><th>选择函数</th><th>说明</th></tr></thead><tbody><tr><td>FIRST()</td><td>最晚一条数据</td></tr><tr><td>LAST()</td><td>最晚一条数据</td></tr><tr><td>MIN()</td><td>最小值</td></tr><tr><td>MAX()</td><td>最大值</td></tr><tr><td>TOP()</td><td>最大N个值</td></tr><tr><td>BOTTOM()</td><td>最小N个值</td></tr><tr><td>PERCENTILE()</td><td>计算百分位数</td></tr><tr><td>SAMPLE()</td><td>N个随机样本</td></tr><tr><td>SPREAD()</td><td>跨度值</td></tr><tr><td><strong>PERCENTILE_OGSKETCH()</strong></td><td>近似分位数</td></tr></tbody></table><div class="hint-container tip"><p class="hint-container-title">提示</p><p>列表中加粗部分为openGemini特有的方法，除此之外，其余方法均兼容InfluxDB的用法，可参考InfluxDB对应的函数用法。 社区正在快马加鞭补齐相关文档，如有需求，可在交流群咨询</p></div><h2 id="first" tabindex="-1"><a class="header-anchor" href="#first" aria-hidden="true">#</a> FIRST()</h2><p>返回具有最早时间戳的field value。</p><p><strong>语法</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">FIRST</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>field_key<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>tag_key<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">&lt;</span>field_key<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>INTO_CLAUSE<span class="token punctuation">]</span> FROM_CLAUSE <span class="token punctuation">[</span>WHERE_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>GROUP_BY_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>ORDER_BY_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>LIMIT_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>OFFSET_CLAUSE<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>FIRST(field_key)</code> 返回field key对应的具有最早时间戳的field value。</p><p><code>FIRST(/regular_expression/)</code> 返回与正则表达式匹配的每个field key对应的具有最早时间戳的field value。</p><p><code>FIRST(*)</code> 返回在measurement中每个field key对应的具有最早时间戳的field value。</p><p><code>FIRST(field_key),tag_key(s),field_key(s)</code> 返回括号中的field key对应的具有最早时间戳的field value，以及相关的tag或field。</p><p><code>FIRST()</code> 支持所有数据类型的field value。</p><p><strong>示例</strong></p><ul><li><strong>选择指定field key对应的具有最早时间戳的field value</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">FIRST</span><span class="token punctuation">(</span><span class="token string">&quot;level description&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> <span class="token keyword">first</span>                <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">17</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">between</span> <span class="token number">6</span> <span class="token operator">and</span> <span class="token number">9</span> feet <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>level description</code>对应的具有最早时间戳的field value。</p><ul><li><strong>选择measurement中每个field key对应的具有最早时间戳的field value</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">FIRST</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-------------------------+-------------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> first_level description <span class="token operator">|</span> first_water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------------------------+-------------------+</span>
<span class="token operator">|</span> <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">between</span> <span class="token number">6</span> <span class="token operator">and</span> <span class="token number">9</span> feet    <span class="token operator">|</span> <span class="token number">8.12</span>              <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------------------------+-------------------+</span>
<span class="token number">3</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中每个field key对应的具有最早时间戳的field value。measurement <code>h2o_feet</code>中有两个field key：<code>level description</code>和<code>water_level</code>。</p><ul><li><strong>选择与正则表达式匹配的每个field key对应的具有最早时间戳的field value</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">FIRST</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token keyword">level</span><span class="token operator">/</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-------------------------+-------------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> first_level description <span class="token operator">|</span> first_water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------------------------+-------------------+</span>
<span class="token operator">|</span> <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">between</span> <span class="token number">6</span> <span class="token operator">and</span> <span class="token number">9</span> feet    <span class="token operator">|</span> <span class="token number">8.12</span>              <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------------------------+-------------------+</span>
<span class="token number">3</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中每个包含单词<code>level</code>的field key对应的具有最早时间戳的field value。</p><ul><li><strong>选择指定field key对应的具有最早时间戳的field value以及相关的tag和field</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">FIRST</span><span class="token punctuation">(</span><span class="token string">&quot;level description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;location&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;water_level&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+--------------+-------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> <span class="token keyword">first</span>                <span class="token operator">|</span> location     <span class="token operator">|</span> water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+--------------+-------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">17</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">between</span> <span class="token number">6</span> <span class="token operator">and</span> <span class="token number">9</span> feet <span class="token operator">|</span> coyote_creek <span class="token operator">|</span> <span class="token number">8.12</span>        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+--------------+-------------+</span>
<span class="token number">4</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>level description</code>对应的具有最早时间戳的field value，以及相关的tag key <code>location</code>和field key <code>water_level</code>的值。</p><ul><li><strong>选择指定field key对应的具有最早时间戳的field value并包含多个子句</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">FIRST</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span> <span class="token keyword">WHERE</span> <span class="token keyword">time</span> <span class="token operator">&gt;=</span> <span class="token string">&#39;2019-08-20T00:12:01Z&#39;</span> <span class="token operator">AND</span> <span class="token keyword">time</span> <span class="token operator">&lt;=</span> <span class="token string">&#39;2019-08-20T08:00:00Z&#39;</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">time</span><span class="token punctuation">(</span><span class="token number">7</span>m<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">*</span> fill<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token keyword">LIMIT</span> <span class="token number">4</span>
name: h2o_feet
tags: location<span class="token operator">=</span>coyote_creek
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> <span class="token keyword">first</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">10</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">1000</span>  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">17</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.684</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">24</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.661</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">31</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.619</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>water_level</code>对应的具有最早时间戳的field value，它涵盖的时间范围在<code>2019-08-20T00:12:01Z</code>和<code>2019-08-20T08:00:00Z</code>之间，并将查询结果按7分钟的时间间隔和每个tag进行分组，同时，该查询用<code>1000</code>填充没有数据的时间间隔，并将返回的数据point个数限制为4。</p><h2 id="last" tabindex="-1"><a class="header-anchor" href="#last" aria-hidden="true">#</a> LAST()</h2><p>返回具有最新时间戳的field value。</p><p><strong>语法</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">LAST</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>field_key<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>tag_key<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">&lt;</span>field_keys<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>INTO_CLAUSE<span class="token punctuation">]</span> FROM_CLAUSE <span class="token punctuation">[</span>WHERE_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>GROUP_BY_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>ORDER_BY_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>LIMIT_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>OFFSET_CLAUSE<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>LAST(field_key)</code> 返回field key对应的具有最新时间戳的field value。</p><p><code>LAST(/regular_expression/)</code> 返回与正则表达式匹配的每个field key对应的具有最新时间戳的field value。</p><p><code>LAST(*)</code> 返回在measurement中每个field key对应的具有最新时间戳的field value。</p><p><code>LAST(field_key),tag_key(s),field_key(s)</code> 返回括号中的field key对应的具有最新时间戳的field value，以及相关的tag或field。</p><p><code>LAST()</code> 支持所有数据类型的field value。</p><p><strong>示例</strong></p><ul><li><strong>选择指定field key对应的具有最新时间戳的field value</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">LAST</span><span class="token punctuation">(</span><span class="token string">&quot;level description&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> <span class="token keyword">last</span>                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">17</span>T21:<span class="token number">42</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">between</span> <span class="token number">3</span> <span class="token operator">and</span> <span class="token number">6</span> feet <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>level description</code>对应的具有最新时间戳的field value。</p><ul><li><strong>选择measurement中每个field key对应的具有最新时间戳的field value</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">LAST</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+------------------------+------------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> last_level description <span class="token operator">|</span> last_water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+------------------------+------------------+</span>
<span class="token operator">|</span> <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">between</span> <span class="token number">3</span> <span class="token operator">and</span> <span class="token number">6</span> feet   <span class="token operator">|</span> <span class="token number">4.938</span>            <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+------------------------+------------------+</span>
<span class="token number">3</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中每个field key对应的具有最新时间戳的field value。measurement <code>h2o_feet</code>中有两个field key：<code>level description</code>和<code>water_level</code>。</p><ul><li><strong>选择与正则表达式匹配的每个field key对应的具有最新时间戳的field value</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">LAST</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token keyword">level</span><span class="token operator">/</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+------------------------+------------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> last_level description <span class="token operator">|</span> last_water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+------------------------+------------------+</span>
<span class="token operator">|</span> <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">between</span> <span class="token number">3</span> <span class="token operator">and</span> <span class="token number">6</span> feet   <span class="token operator">|</span> <span class="token number">4.938</span>            <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+------------------------+------------------+</span>
<span class="token number">3</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中每个包含单词<code>level</code>的field key对应的具有最新时间戳的field value。</p><ul><li><strong>选择指定field key对应的具有最新时间戳的field value以及相关的tag和field</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">LAST</span><span class="token punctuation">(</span><span class="token string">&quot;level description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;location&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;water_level&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+--------------+-------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> <span class="token keyword">last</span>                 <span class="token operator">|</span> location     <span class="token operator">|</span> water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+--------------+-------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">17</span>T21:<span class="token number">42</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">between</span> <span class="token number">3</span> <span class="token operator">and</span> <span class="token number">6</span> feet <span class="token operator">|</span> santa_monica <span class="token operator">|</span> <span class="token number">4.938</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+----------------------+--------------+-------------+</span>
<span class="token number">4</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>level description</code>对应的具有最新时间戳的field value，以及相关的tag key <code>location</code>和field key <code>water_level</code>的值。</p><ul><li><strong>选择指定field key对应的具有最新时间戳的field value并包含多个子句</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">LAST</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span> <span class="token keyword">WHERE</span> <span class="token keyword">time</span> <span class="token operator">&gt;=</span> <span class="token string">&#39;2019-08-20T00:12:01Z&#39;</span> <span class="token operator">AND</span> <span class="token keyword">time</span> <span class="token operator">&lt;=</span> <span class="token string">&#39;2019-08-20T08:00:00Z&#39;</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">time</span><span class="token punctuation">(</span><span class="token number">7</span>m<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">*</span> fill<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token keyword">LIMIT</span> <span class="token number">4</span>
name: h2o_feet
tags: location<span class="token operator">=</span>coyote_creek
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> <span class="token keyword">last</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">10</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">1000</span>  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">17</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.684</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">24</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.655</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">31</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.619</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>water_level</code>对应的具有最新时间戳的field value，它涵盖的时间范围在<code>2019-08-20T00:12:01Z</code>和<code>2019-08-20T08:00:00Z</code>之间，并将查询结果按7分钟的时间间隔和每个tag进行分组，同时，该查询用<code>1000</code>填充没有数据的时间间隔，并将返回的数据point个数限制为4。</p><h2 id="max" tabindex="-1"><a class="header-anchor" href="#max" aria-hidden="true">#</a> MAX()</h2><p>返回field value的最大值。</p><p><strong>语法</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>field_key<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>tag_key<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">&lt;</span>field__key<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>INTO_CLAUSE<span class="token punctuation">]</span> FROM_CLAUSE <span class="token punctuation">[</span>WHERE_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>GROUP_BY_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>ORDER_BY_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>LIMIT_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>OFFSET_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>SLIMIT_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>SOFFSET_CLAUSE<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>MAX(field_key)</code> 返回field key对应的field value的最大值。</p><p><code>MAX(/regular_expression/)</code> 返回与正则表达式匹配的每个field key对应的field value的最大值。</p><p><code>MAX(*)</code> 返回在measurement中每个field key对应的field value的最大值。</p><p><code>MAX(field_key),tag_key(s),field_key(s)</code> 返回括号中的field key对应的field value的最大值，以及相关的tag或field。</p><p><code>MAX()</code> 支持数据类型为int64和float64的field value。</p><p><strong>示例</strong></p><ul><li><strong>选择指定field key对应的field value的最大值</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> max   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T07:<span class="token number">24</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">9.964</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>water_level</code>对应的field value的最大值。</p><ul><li><strong>选择measurement中每个field key对应的field value的最大值</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> max_water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T07:<span class="token number">24</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">9.964</span>           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中每个存储数值的field key对应的field value的最大值。measurement <code>h2o_feet</code>中只有一个数值类型的field：<code>water_level</code>。</p><ul><li><strong>选择与正则表达式匹配的每个field key对应的field value的最大值</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token keyword">level</span><span class="token operator">/</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> max_water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T07:<span class="token number">24</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">9.964</span>           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中每个存储数值并包含单词<code>level</code>的field key对应的field value的最大值。</p><ul><li><strong>选择指定field key对应的field value的最大值以及相关的tag和field</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;location&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;level description&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-------+--------------+---------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> max   <span class="token operator">|</span> location     <span class="token operator">|</span> <span class="token keyword">level</span> description         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+--------------+---------------------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T07:<span class="token number">24</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">9.964</span> <span class="token operator">|</span> coyote_creek <span class="token operator">|</span> at <span class="token operator">or</span> greater than <span class="token number">9</span> feet <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+--------------+---------------------------+</span>
<span class="token number">4</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>water_level</code>对应的field value的最大值，以及相关的tag key <code>location</code>和field key <code>level description</code>的值。</p><ul><li><strong>选择指定field key对应的field value的最大值并包含多个子句</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span> <span class="token keyword">WHERE</span> <span class="token keyword">time</span> <span class="token operator">&gt;=</span> <span class="token string">&#39;2019-08-20T00:12:01Z&#39;</span> <span class="token operator">AND</span> <span class="token keyword">time</span> <span class="token operator">&lt;=</span> <span class="token string">&#39;2019-08-20T08:00:00Z&#39;</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">time</span><span class="token punctuation">(</span><span class="token number">7</span>m<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">*</span> fill<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token keyword">LIMIT</span> <span class="token number">4</span>
name: h2o_feet
tags: location<span class="token operator">=</span>coyote_creek
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> max   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">10</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">1000</span>  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">17</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.684</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">24</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.661</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">31</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.619</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>water_level</code>对应的field value的最大值，它涵盖的时间范围在<code>2019-08-20T00:12:01Z</code>和<code>2019-08-20T08:00:00Z</code>之间，并将查询结果按7分钟的时间间隔和每个tag进行分组，同时，该查询用<code>1000</code>填充没有数据的时间间隔，并将返回的数据point个数限制为4。</p><h2 id="min" tabindex="-1"><a class="header-anchor" href="#min" aria-hidden="true">#</a> MIN()</h2><p>返回field value的最小值。</p><p><strong>语法</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>field_key<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>tag_key<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">&lt;</span>field_key<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>INTO_CLAUSE<span class="token punctuation">]</span> FROM_CLAUSE <span class="token punctuation">[</span>WHERE_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>GROUP_BY_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>ORDER_BY_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>LIMIT_CLAUSE<span class="token punctuation">]</span> <span class="token punctuation">[</span>OFFSET_CLAUSE<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>MIN(field_key)</code> 返回field key对应的field value的最小值。</p><p><code>MIN(/regular_expression/)</code> 返回与正则表达式匹配的每个field key对应的field value的最小值。</p><p><code>MIN(*)</code> 返回在measurement中每个field key对应的field value的最小值。</p><p><code>MIN(field_key),tag_key(s),field_key(s)</code> 返回括号中的field key对应的field value的最小值，以及相关的tag和/或field。</p><p><code>MIN()</code>支持数据类型为int64和float64的field value。</p><p><strong>示例</strong></p><ul><li><strong>选择指定field key对应的field value的最小值</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> min   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T14:<span class="token number">30</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">-</span><span class="token number">0.61</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>water_level</code>对应的field value的最小值。</p><ul><li><strong>选择measurement中每个field key对应的field value的最小值</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> min_water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T14:<span class="token number">30</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">-</span><span class="token number">0.61</span>           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中每个存储数值的field key对应的field value的最小值。measurement <code>h2o_feet</code>中只有一个数值类型的field：<code>water_level</code>。</p><ul><li><strong>选择与正则表达式匹配的每个field key对应的field value的最小值</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token keyword">level</span><span class="token operator">/</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> min_water_level <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T14:<span class="token number">30</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">-</span><span class="token number">0.61</span>           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-----------------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中每个存储数值并包含单词<code>level</code>的field key对应的field value的最小值。</p><ul><li><strong>选择指定field key对应的field value的最小值以及相关的tag和field</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;location&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;level description&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token operator">+</span><span class="token comment">----------------------+-------+--------------+-------------------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> min   <span class="token operator">|</span> location     <span class="token operator">|</span> <span class="token keyword">level</span> description <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+--------------+-------------------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T14:<span class="token number">30</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token operator">-</span><span class="token number">0.61</span> <span class="token operator">|</span> coyote_creek <span class="token operator">|</span> below <span class="token number">3</span> feet      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+--------------+-------------------+</span>
<span class="token number">4</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>water_level</code>对应的field value的最小值，以及相关的tag key <code>location</code>和field key <code>level description</code>的值。</p><ul><li><strong>选择指定field key对应的field value的最小值并包含多个子句</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span> <span class="token keyword">WHERE</span> <span class="token keyword">time</span> <span class="token operator">&gt;=</span> <span class="token string">&#39;2019-08-20T00:12:01Z&#39;</span> <span class="token operator">AND</span> <span class="token keyword">time</span> <span class="token operator">&lt;=</span> <span class="token string">&#39;2019-08-20T08:00:00Z&#39;</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">time</span><span class="token punctuation">(</span><span class="token number">7</span>m<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">*</span> fill<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token keyword">LIMIT</span> <span class="token number">4</span>
name: h2o_feet
tags: location<span class="token operator">=</span>coyote_creek
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                 <span class="token operator">|</span> min   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">10</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">1000</span>  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">17</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.684</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">24</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.655</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span>T00:<span class="token number">31</span>:<span class="token number">00</span>Z <span class="token operator">|</span> <span class="token number">8.619</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------+</span>
<span class="token number">2</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该查询返回measurement <code>h2o_feet</code>中field key <code>water_level</code>对应的field value的最小值，它涵盖的时间范围在<code>2019-08-20T00:12:01Z</code>和<code>2019-08-20T08:00:00Z</code>之间，并将查询结果按7分钟的时间间隔和每个tag进行分组，同时，该查询用<code>1000</code>填充没有数据的时间间隔，并将返回的数据point个数限制为4。</p>`,103),t=[o];function l(c,r){return n(),a("div",null,t)}const i=s(p,[["render",l],["__file","selector.html.vue"]]);export{i as default};
